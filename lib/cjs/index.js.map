{"version":3,"file":"index.js","sources":["../../node_modules/style-inject/dist/style-inject.es.js","../../src/useIntersectionObserver.jsx","../../src/useImageFetcher.jsx","../../src/Ymage.jsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { useState, useEffect } from 'react'\r\n\r\nconst useIntersectionObserver = (element, margin=0) => {\r\n    const [isVisible, setState] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const observer = new IntersectionObserver(\r\n            ([entry]) => {\r\n              if (entry.isIntersecting) {\r\n                setState(entry.isIntersecting);\r\n                observer.disconnect();\r\n              }\r\n            }, { rootMargin: margin }\r\n        );\r\n        element.current && observer.observe(element.current);\r\n        return () => observer.disconnect() \r\n    }, []);\r\n\r\n    return isVisible;\r\n};\r\nexport default useIntersectionObserver;\r\n","import {useEffect, useState} from 'react'\r\n\r\n\r\nexport default function useImageFetcher(src, onSize, onLoad) {\r\n    const [dataURL, setDataURL] = useState(getImageFromCache(src))\r\n\r\n   \r\n    function clearImageCache(){\r\n        localStorage.clear();\r\n    }\r\n    function getImageFromCache() {\r\n        return localStorage.getItem(src);\r\n    }\r\n\r\n    function setImageCache(durl) {\r\n        localStorage.setItem(src, durl);\r\n    }\r\n\r\n    \r\n    useEffect(()=>{\r\n\r\n        window.addEventListener('beforeunload', clearImageCache);\r\n\r\n        if(dataURL === null) {\r\n            let imageSize = 0;\r\n            let imageType = null;\r\n                        \r\n            fetch(src)\r\n                .then((response) => {\r\n                    imageType = response.headers.get('Content-Type');\r\n                    imageSize  = response.headers.get('Content-Length');\r\n                    return response.body;\r\n                })\r\n            .then((body) => {\r\n                const reader = body.getReader();\r\n\r\n                let size_published = false;\r\n                let sos_markers = 0;\r\n                let sop_marker = false;\r\n                let analizing = (imageType === \"image/jpeg\");\r\n                let last_update_size = 0;\r\n                let chunks = new Array();\r\n                let durl;\r\n\r\n                return new ReadableStream({\r\n                    start(controller) {\r\n                        return pump();\r\n\r\n                        function pump() {\r\n                            return reader.read().then(({ done, value }) => {\r\n\r\n                                if (done) {\r\n                                    if(!durl)\r\n                                        publishDataURL();\r\n                                    setImageCache(durl);\r\n                                    onLoad();\r\n                                    onSizeHandler();\r\n                                    controller.close();\r\n                                    return;\r\n                                } else {\r\n                                    chunks.push(value);\r\n\r\n                                    if (analizing)\r\n                                        readJPGMarkers(value, \r\n                                            (sos) => {\r\n                                                if(!sop_marker && ++sos_markers > 1)\r\n                                                    jpegIsBaseline();\r\n                                                else if(sop_marker && ++sos_markers > 2)\r\n                                                    jpegFirstScan();\r\n                                            }, \r\n                                            (sop) => jpegIsProgrssive()\r\n                                        )\r\n                                    else if(sop_marker)\r\n                                        jpegUpdate();\r\n                                }\r\n\r\n                                controller.enqueue(value);\r\n                                return pump();\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n\r\n\r\n\r\n                function jpegIsProgrssive(){\r\n                    sop_marker = true;\r\n                    return false; \r\n                }\r\n\r\n                function jpegIsBaseline(){\r\n                    analizing = false;\r\n                    return true;\r\n                }\r\n\r\n                function jpegFirstScan(){\r\n                    if(analizing){\r\n                        jpegUpdate(true);\r\n                        analizing = false;\r\n                    }\r\n                }\r\n\r\n                function jpegUpdate(first_scan = false){\r\n                    const current_size = chunksSize(chunks)\r\n                    if( first_scan \r\n                        || (current_size - last_update_size) >= (imageSize / 3) \r\n                        || current_size == imageSize )\r\n                    {\r\n                        last_update_size = current_size;\r\n                        publishDataURL();\r\n                        if(first_scan && onSize)\r\n                            onSizeHandler();\r\n                    }\r\n                }\r\n\r\n                function publishDataURL(){\r\n                    const blob = new Blob(chunks, { type: imageType });\r\n                    if(durl)\r\n                        URL.revokeObjectURL(durl);\r\n                    durl = URL.createObjectURL(blob);\r\n                    setDataURL(durl)\r\n                }\r\n\r\n                function onSizeHandler() {\r\n                    if(!size_published){\r\n                        const tmp_image = new Image();\r\n                        tmp_image.onload = () => {\r\n                            onSize({x: tmp_image.naturalWidth ,y: tmp_image.naturalHeight});\r\n                            size_published = true;\r\n                        }\r\n                        tmp_image.src = durl;\r\n                    }\r\n                }\r\n\r\n            })\r\n            .catch((err) => console.error(err));\r\n        }\r\n\r\n        return () => {\r\n            window.removeEventListener('beforeunload', clearImageCache);\r\n        }\r\n    }, [])\r\n\r\n\r\n    return dataURL;\r\n}\r\n\r\nconst readJPGMarkers = (chunk, onSOS, onSOP) => {\r\n    for(let i = 0; i < chunk.length; ++i){\r\n        if(chunk[i] === 0xFF){\r\n            switch(chunk[++i]){\r\n                case 0xDA: onSOS(i); break;\r\n                case 0xC2: onSOP(i); break;\r\n            }\r\n        } \r\n    }\r\n}   \r\n\r\n\r\n\r\nfunction chunksSize(chunks) {\r\n    let size = 0;\r\n    for(const chunk of chunks)\r\n        size += chunk.length;\r\n    return size;\r\n}\r\n","import React from 'react'\r\nimport './Ymage.scss';\r\n\r\nimport { useRef, useState, useEffect } from 'react';\r\nimport useIntersectionObserver from \"./useIntersectionObserver.jsx\"\r\nimport useImageFetcher from './useImageFetcher.jsx'\r\n\r\n\r\nexport default function Ymage({\r\n    url, \r\n    copyright, \r\n    lazy=\"200px\", \r\n    type=\"img\", \r\n    onLoad, \r\n    onSize,\r\n    style,\r\n    className=\"\", \r\n    ...props\r\n}) {\r\n\r\n\tconst container = useRef();\r\n\tconst isVisible = (lazy === false) ? true : useIntersectionObserver(container, lazy);\r\n    const options = {as: type, copyright: copyright}; \r\n\r\n    function stylesFromProps(props) {\r\n        const styles = {};\r\n        if(props.w) styles.width = props.w;\r\n        if(props.h) styles.height = props.h;\r\n        if(props.r) styles.borderRadius = props.r;\r\n        if(props.wh) styles.aspectRatio = props.wh;\r\n        return styles;\r\n    }\r\n\r\n    function contextMenuHandler(){\r\n        if(options.copyright) {\r\n            container.current.classList.add(\"copyright\");\r\n            setTimeout(() => container.current.classList.remove(\"copyright\"), 1000);\r\n        }\r\n    }\r\n\r\n    return (\r\n\t\t<figure \r\n        {...props} \r\n        style={{...stylesFromProps(props), ...style}}\r\n        ref={container} \r\n        className={\"Ymage \" + className}\r\n        onContextMenu={contextMenuHandler}>\r\n\t\t\t{isVisible ? <FetchImage url={url} options={options} onSize={onSize} onLoad={onLoad}/> : null }\r\n\t\t</figure>\r\n\t)\r\n}\r\n\r\n\r\nconst FetchImage = ({url, options, onLoad, onSize}) => {\r\n    const imageData = useImageFetcher(url, onSize, onLoad);\r\n    const [showLoader, setShowLoader] = useState(true);\r\n    const fade = useRef(false);\r\n\r\n    useEffect(()=>{\r\n\r\n        console.log(\"new urlData: \"+ imageData)\r\n        if(showLoader && imageData)\r\n            setTimeout(() => setShowLoader(false), 1000)\r\n    },[imageData])\r\n\r\n    useEffect(()=>{\r\n        if(imageData === null){\r\n            fade.current = true;\r\n            console.log(\"image fetching = fading/loading\")\r\n        }\r\n    },[])\r\n\r\n\r\n    return (<>\r\n        {showLoader ? <Loader/> : null}\r\n        {imageData ? \r\n            <PrintImage url={imageData} options={{...options, fade: fade.current}}/> : null}\r\n        </>)\r\n}\r\n\r\n\r\nconst PrintImage = ({url, options}) => {\r\n    const imageRef = useRef(null);\r\n    useEffect(()=>{\r\n        imageRef.current.src = null;\r\n        imageRef.current.src = url;\r\n\r\n    }, [url])\r\n\r\n    if(options.as === \"img\")\r\n        return <img\r\n            ref={imageRef}\r\n            className = {\r\n                  (options.fade ? \"fade-in\" : \"\") \r\n                + (options.copyright ? \" copyright\" : \"\")}\r\n            />\r\n    else return <div \r\n            className = {\r\n                  (options.fade ? \"fade-in\" : \"\") \r\n                + (options.copyright ? \" copyright\" : \"\")} \r\n            style = {{backgroundImage:\"url('\" + url + \"')\"}}\r\n            ></div>\r\n}\r\n\r\n\r\nconst Loader = () =>{\r\n\treturn( \r\n        <svg \r\n            data-testid=\"placeholder-spinner\"\r\n            className=\"ymage-spinner\" \r\n            xmlns=\"http://www.w3.org/2000/svg\" \r\n            xmlnsXlink=\"http://www.w3.org/1999/xlink\" \r\n            viewBox=\"0 0 100 100\" \r\n            enableBackground=\"new 0 0 0 0\" >\r\n\r\n            <path fill=\"#fff\" d=\"M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50\"></path>\r\n        </svg>\r\n    )\r\n}\r\n\r\n\r\n\r\n"],"names":["useIntersectionObserver","element","margin","isVisible","setState","useState","useEffect","observer","IntersectionObserver","entry","isIntersecting","disconnect","rootMargin","current","observe","useImageFetcher","src","onSize","onLoad","dataURL","setDataURL","getImageFromCache","clearImageCache","localStorage","clear","getItem","setImageCache","durl","setItem","window","addEventListener","imageSize","imageType","fetch","then","response","headers","get","body","reader","getReader","size_published","sos_markers","sop_marker","analizing","last_update_size","chunks","Array","ReadableStream","start","controller","pump","read","done","value","publishDataURL","onSizeHandler","close","push","readJPGMarkers","sos","jpegIsBaseline","jpegFirstScan","sop","jpegIsProgrssive","jpegUpdate","enqueue","first_scan","current_size","chunksSize","blob","Blob","type","URL","revokeObjectURL","createObjectURL","tmp_image","Image","onload","x","naturalWidth","y","naturalHeight","catch","err","console","error","removeEventListener","chunk","onSOS","onSOP","i","length","size","Ymage","url","copyright","lazy","style","className","props","container","useRef","options","as","stylesFromProps","styles","w","width","h","height","r","borderRadius","wh","aspectRatio","contextMenuHandler","classList","add","setTimeout","remove","React","createElement","_extends","ref","onContextMenu","FetchImage","imageData","showLoader","setShowLoader","fade","log","Fragment","Loader","PrintImage","imageRef","backgroundImage","xmlns","xmlnsXlink","viewBox","enableBackground","fill","d"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,SAAS,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE;AAC/B,EAAE,KAAK,GAAG,KAAK,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC;AACjC,EAAE,IAAI,QAAQ,GAAG,GAAG,CAAC,QAAQ,CAAC;AAC9B;AACA,EAAE,IAAI,CAAC,GAAG,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE,EAAE,OAAO,EAAE;AAC1D;AACA,EAAE,IAAI,IAAI,GAAG,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AACvE,EAAE,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;AAC9C,EAAE,KAAK,CAAC,IAAI,GAAG,UAAU,CAAC;AAC1B;AACA,EAAE,IAAI,QAAQ,KAAK,KAAK,EAAE;AAC1B,IAAI,IAAI,IAAI,CAAC,UAAU,EAAE;AACzB,MAAM,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;AAChD,KAAK,MAAM;AACX,MAAM,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AAC9B,KAAK;AACL,GAAG,MAAM;AACT,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AAC5B,GAAG;AACH;AACA,EAAE,IAAI,KAAK,CAAC,UAAU,EAAE;AACxB,IAAI,KAAK,CAAC,UAAU,CAAC,OAAO,GAAG,GAAG,CAAC;AACnC,GAAG,MAAM;AACT,IAAI,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC;AACpD,GAAG;AACH;;;;;ACvBA,MAAMA,uBAAuB,GAAGA,CAACC,OAAO,EAAEC,MAAM,GAAC,CAAC,KAAK;EACnD,MAAM,CAACC,SAAS,EAAEC,QAAQ,CAAC,GAAGC,cAAQ,CAAC,KAAK,CAAC,CAAA;AAE7CC,EAAAA,eAAS,CAAC,MAAM;IACZ,MAAMC,QAAQ,GAAG,IAAIC,oBAAoB,CACrC,CAAC,CAACC,KAAK,CAAC,KAAK;MACX,IAAIA,KAAK,CAACC,cAAc,EAAE;AACxBN,QAAAA,QAAQ,CAACK,KAAK,CAACC,cAAc,CAAC,CAAA;QAC9BH,QAAQ,CAACI,UAAU,EAAE,CAAA;AACvB,OAAA;AACF,KAAC,EAAE;AAAEC,MAAAA,UAAU,EAAEV,MAAAA;AAAO,KAC5B,CAAC,CAAA;IACDD,OAAO,CAACY,OAAO,IAAIN,QAAQ,CAACO,OAAO,CAACb,OAAO,CAACY,OAAO,CAAC,CAAA;AACpD,IAAA,OAAO,MAAMN,QAAQ,CAACI,UAAU,EAAE,CAAA;GACrC,EAAE,EAAE,CAAC,CAAA;AAEN,EAAA,OAAOR,SAAS,CAAA;AACpB,CAAC;;AChBc,SAASY,eAAeA,CAACC,GAAG,EAAEC,MAAM,EAAEC,MAAM,EAAE;AACzD,EAAA,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGf,cAAQ,CAACgB,iBAAiB,CAAI,CAAC,CAAC,CAAA;EAG9D,SAASC,eAAeA,GAAE;IACtBC,YAAY,CAACC,KAAK,EAAE,CAAA;AACxB,GAAA;EACA,SAASH,iBAAiBA,GAAG;AACzB,IAAA,OAAOE,YAAY,CAACE,OAAO,CAACT,GAAG,CAAC,CAAA;AACpC,GAAA;EAEA,SAASU,aAAaA,CAACC,IAAI,EAAE;AACzBJ,IAAAA,YAAY,CAACK,OAAO,CAACZ,GAAG,EAAEW,IAAI,CAAC,CAAA;AACnC,GAAA;AAGArB,EAAAA,eAAS,CAAC,MAAI;AAEVuB,IAAAA,MAAM,CAACC,gBAAgB,CAAC,cAAc,EAAER,eAAe,CAAC,CAAA;IAExD,IAAGH,OAAO,KAAK,IAAI,EAAE;MACjB,IAAIY,SAAS,GAAG,CAAC,CAAA;MACjB,IAAIC,SAAS,GAAG,IAAI,CAAA;AAEpBC,MAAAA,KAAK,CAACjB,GAAG,CAAC,CACLkB,IAAI,CAAEC,QAAQ,IAAK;QAChBH,SAAS,GAAGG,QAAQ,CAACC,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC,CAAA;QAChDN,SAAS,GAAII,QAAQ,CAACC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC,CAAA;QACnD,OAAOF,QAAQ,CAACG,IAAI,CAAA;AACxB,OAAC,CAAC,CACLJ,IAAI,CAAEI,IAAI,IAAK;AACZ,QAAA,MAAMC,MAAM,GAAGD,IAAI,CAACE,SAAS,EAAE,CAAA;QAE/B,IAAIC,cAAc,GAAG,KAAK,CAAA;QAC1B,IAAIC,WAAW,GAAG,CAAC,CAAA;QACnB,IAAIC,UAAU,GAAG,KAAK,CAAA;AACtB,QAAA,IAAIC,SAAS,GAAIZ,SAAS,KAAK,YAAa,CAAA;QAC5C,IAAIa,gBAAgB,GAAG,CAAC,CAAA;AACxB,QAAA,IAAIC,MAAM,GAAG,IAAIC,KAAK,EAAE,CAAA;AACxB,QAAA,IAAIpB,IAAI,CAAA;QAER,OAAO,IAAIqB,cAAc,CAAC;UACtBC,KAAKA,CAACC,UAAU,EAAE;YACd,OAAOC,IAAI,EAAE,CAAA;YAEb,SAASA,IAAIA,GAAG;cACZ,OAAOZ,MAAM,CAACa,IAAI,EAAE,CAAClB,IAAI,CAAC,CAAC;gBAAEmB,IAAI;AAAEC,gBAAAA,KAAAA;AAAM,eAAC,KAAK;AAE3C,gBAAA,IAAID,IAAI,EAAE;AACN,kBAAA,IAAG,CAAC1B,IAAI,EACJ4B,cAAc,EAAE,CAAA;kBACpB7B,aAAa,CAACC,IAAI,CAAC,CAAA;AACnBT,kBAAAA,MAAM,EAAE,CAAA;AACRsC,kBAAAA,aAAa,EAAE,CAAA;kBACfN,UAAU,CAACO,KAAK,EAAE,CAAA;AAClB,kBAAA,OAAA;AACJ,iBAAC,MAAM;AACHX,kBAAAA,MAAM,CAACY,IAAI,CAACJ,KAAK,CAAC,CAAA;AAElB,kBAAA,IAAIV,SAAS,EACTe,cAAc,CAACL,KAAK,EACfM,GAAG,IAAK;oBACL,IAAG,CAACjB,UAAU,IAAI,EAAED,WAAW,GAAG,CAAC,EAC/BmB,cAAc,EAAE,CAAC,KAChB,IAAGlB,UAAU,IAAI,EAAED,WAAW,GAAG,CAAC,EACnCoB,aAAa,EAAE,CAAA;AACvB,mBAAC,EACAC,GAAG,IAAKC,gBAAgB,EAC7B,CAAC,CAAA,KACA,IAAGrB,UAAU,EACdsB,UAAU,EAAE,CAAA;AACpB,iBAAA;AAEAf,gBAAAA,UAAU,CAACgB,OAAO,CAACZ,KAAK,CAAC,CAAA;gBACzB,OAAOH,IAAI,EAAE,CAAA;AACjB,eAAC,CAAC,CAAA;AACN,aAAA;AACJ,WAAA;AACJ,SAAC,CAAC,CAAA;QAIF,SAASa,gBAAgBA,GAAE;AACvBrB,UAAAA,UAAU,GAAG,IAAI,CAAA;AACjB,UAAA,OAAO,KAAK,CAAA;AAChB,SAAA;QAEA,SAASkB,cAAcA,GAAE;AACrBjB,UAAAA,SAAS,GAAG,KAAK,CAAA;AACjB,UAAA,OAAO,IAAI,CAAA;AACf,SAAA;QAEA,SAASkB,aAAaA,GAAE;AACpB,UAAA,IAAGlB,SAAS,EAAC;YACTqB,UAAU,CAAC,IAAI,CAAC,CAAA;AAChBrB,YAAAA,SAAS,GAAG,KAAK,CAAA;AACrB,WAAA;AACJ,SAAA;AAEA,QAAA,SAASqB,UAAUA,CAACE,UAAU,GAAG,KAAK,EAAC;AACnC,UAAA,MAAMC,YAAY,GAAGC,UAAU,CAACvB,MAAM,CAAC,CAAA;AACvC,UAAA,IAAIqB,UAAU,IACNC,YAAY,GAAGvB,gBAAgB,IAAMd,SAAS,GAAG,CAAE,IACpDqC,YAAY,IAAIrC,SAAS,EAChC;AACIc,YAAAA,gBAAgB,GAAGuB,YAAY,CAAA;AAC/Bb,YAAAA,cAAc,EAAE,CAAA;AAChB,YAAA,IAAGY,UAAU,IAAIlD,MAAM,EACnBuC,aAAa,EAAE,CAAA;AACvB,WAAA;AACJ,SAAA;QAEA,SAASD,cAAcA,GAAE;AACrB,UAAA,MAAMe,IAAI,GAAG,IAAIC,IAAI,CAACzB,MAAM,EAAE;AAAE0B,YAAAA,IAAI,EAAExC,SAAAA;AAAU,WAAC,CAAC,CAAA;AAClD,UAAA,IAAGL,IAAI,EACH8C,GAAG,CAACC,eAAe,CAAC/C,IAAI,CAAC,CAAA;AAC7BA,UAAAA,IAAI,GAAG8C,GAAG,CAACE,eAAe,CAACL,IAAI,CAAC,CAAA;UAChClD,UAAU,CAACO,IAAI,CAAC,CAAA;AACpB,SAAA;QAEA,SAAS6B,aAAaA,GAAG;UACrB,IAAG,CAACf,cAAc,EAAC;AACf,YAAA,MAAMmC,SAAS,GAAG,IAAIC,KAAK,EAAE,CAAA;YAC7BD,SAAS,CAACE,MAAM,GAAG,MAAM;AACrB7D,cAAAA,MAAM,CAAC;gBAAC8D,CAAC,EAAEH,SAAS,CAACI,YAAY;gBAAEC,CAAC,EAAEL,SAAS,CAACM,aAAAA;AAAa,eAAC,CAAC,CAAA;AAC/DzC,cAAAA,cAAc,GAAG,IAAI,CAAA;aACxB,CAAA;YACDmC,SAAS,CAAC5D,GAAG,GAAGW,IAAI,CAAA;AACxB,WAAA;AACJ,SAAA;AAEJ,OAAC,CAAC,CACDwD,KAAK,CAAEC,GAAG,IAAKC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CAAC,CAAA;AACvC,KAAA;AAEA,IAAA,OAAO,MAAM;AACTvD,MAAAA,MAAM,CAAC0D,mBAAmB,CAAC,cAAc,EAAEjE,eAAe,CAAC,CAAA;KAC9D,CAAA;GACJ,EAAE,EAAE,CAAC,CAAA;AAGN,EAAA,OAAOH,OAAO,CAAA;AAClB,CAAA;AAEA,MAAMwC,cAAc,GAAGA,CAAC6B,KAAK,EAAEC,KAAK,EAAEC,KAAK,KAAK;AAC5C,EAAA,KAAI,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,KAAK,CAACI,MAAM,EAAE,EAAED,CAAC,EAAC;AACjC,IAAA,IAAGH,KAAK,CAACG,CAAC,CAAC,KAAK,IAAI,EAAC;AACjB,MAAA,QAAOH,KAAK,CAAC,EAAEG,CAAC,CAAC;AACb,QAAA,KAAK,IAAI;UAAEF,KAAK,CAACE,CAAC,CAAC,CAAA;AAAE,UAAA,MAAA;AACrB,QAAA,KAAK,IAAI;UAAED,KAAK,CAACC,CAAC,CAAC,CAAA;AAAE,UAAA,MAAA;AACzB,OAAA;AACJ,KAAA;AACJ,GAAA;AACJ,CAAC,CAAA;AAID,SAAStB,UAAUA,CAACvB,MAAM,EAAE;EACxB,IAAI+C,IAAI,GAAG,CAAC,CAAA;EACZ,KAAI,MAAML,KAAK,IAAI1C,MAAM,EACrB+C,IAAI,IAAIL,KAAK,CAACI,MAAM,CAAA;AACxB,EAAA,OAAOC,IAAI,CAAA;AACf;;AC7Je,SAASC,KAAKA,CAAC;EAC1BC,GAAG;EACHC,SAAS;AACTC,EAAAA,IAAI,GAAC,OAAO;AACZzB,EAAAA,IAAI,GAAC,KAAK;EACVtD,MAAM;EACND,MAAM;EACNiF,KAAK;AACLC,EAAAA,SAAS,GAAC,EAAE;EACZ,GAAGC,KAAAA;AACP,CAAC,EAAE;AAEF,EAAA,MAAMC,SAAS,GAAGC,YAAM,EAAE,CAAA;AAC1B,EAAA,MAAMnG,SAAS,GAAI8F,IAAI,KAAK,KAAK,GAAI,IAAI,GAAGjG,uBAAuB,CAACqG,SAAS,EAAEJ,IAAI,CAAC,CAAA;AACjF,EAAA,MAAMM,OAAO,GAAG;AAACC,IAAAA,EAAE,EAAEhC,IAAI;AAAEwB,IAAAA,SAAS,EAAEA,SAAAA;GAAU,CAAA;EAEhD,SAASS,eAAeA,CAACL,KAAK,EAAE;IAC5B,MAAMM,MAAM,GAAG,EAAE,CAAA;IACjB,IAAGN,KAAK,CAACO,CAAC,EAAED,MAAM,CAACE,KAAK,GAAGR,KAAK,CAACO,CAAC,CAAA;IAClC,IAAGP,KAAK,CAACS,CAAC,EAAEH,MAAM,CAACI,MAAM,GAAGV,KAAK,CAACS,CAAC,CAAA;IACnC,IAAGT,KAAK,CAACW,CAAC,EAAEL,MAAM,CAACM,YAAY,GAAGZ,KAAK,CAACW,CAAC,CAAA;IACzC,IAAGX,KAAK,CAACa,EAAE,EAAEP,MAAM,CAACQ,WAAW,GAAGd,KAAK,CAACa,EAAE,CAAA;AAC1C,IAAA,OAAOP,MAAM,CAAA;AACjB,GAAA;EAEA,SAASS,kBAAkBA,GAAE;IACzB,IAAGZ,OAAO,CAACP,SAAS,EAAE;MAClBK,SAAS,CAACxF,OAAO,CAACuG,SAAS,CAACC,GAAG,CAAC,WAAW,CAAC,CAAA;AAC5CC,MAAAA,UAAU,CAAC,MAAMjB,SAAS,CAACxF,OAAO,CAACuG,SAAS,CAACG,MAAM,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,CAAA;AAC3E,KAAA;AACJ,GAAA;AAEA,EAAA,oBACFC,KAAA,CAAAC,aAAA,CAAAC,QAAAA,EAAAA,QAAA,KACUtB,KAAK,EAAA;AACTF,IAAAA,KAAK,EAAE;MAAC,GAAGO,eAAe,CAACL,KAAK,CAAC;MAAE,GAAGF,KAAAA;KAAO;AAC7CyB,IAAAA,GAAG,EAAEtB,SAAU;IACfF,SAAS,EAAE,QAAQ,GAAGA,SAAU;AAChCyB,IAAAA,aAAa,EAAET,kBAAAA;AAAmB,GAAA,CAAA,EACtChH,SAAS,gBAAGqH,KAAA,CAAAC,aAAA,CAACI,UAAU,EAAA;AAAC9B,IAAAA,GAAG,EAAEA,GAAI;AAACQ,IAAAA,OAAO,EAAEA,OAAQ;AAACtF,IAAAA,MAAM,EAAEA,MAAO;AAACC,IAAAA,MAAM,EAAEA,MAAAA;GAAQ,CAAC,GAAG,IAClF,CAAC,CAAA;AAEX,CAAA;AAGA,MAAM2G,UAAU,GAAGA,CAAC;EAAC9B,GAAG;EAAEQ,OAAO;EAAErF,MAAM;AAAED,EAAAA,MAAAA;AAAM,CAAC,KAAK;EACnD,MAAM6G,SAAS,GAAG/G,eAAe,CAACgF,GAAG,EAAE9E,MAAM,EAAEC,MAAM,CAAC,CAAA;EACtD,MAAM,CAAC6G,UAAU,EAAEC,aAAa,CAAC,GAAG3H,cAAQ,CAAC,IAAI,CAAC,CAAA;AAClD,EAAA,MAAM4H,IAAI,GAAG3B,YAAM,CAAC,KAAK,CAAC,CAAA;AAE1BhG,EAAAA,eAAS,CAAC,MAAI;AAEV+E,IAAAA,OAAO,CAAC6C,GAAG,CAAC,eAAe,GAAEJ,SAAS,CAAC,CAAA;AACvC,IAAA,IAAGC,UAAU,IAAID,SAAS,EACtBR,UAAU,CAAC,MAAMU,aAAa,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,CAAA;AACpD,GAAC,EAAC,CAACF,SAAS,CAAC,CAAC,CAAA;AAEdxH,EAAAA,eAAS,CAAC,MAAI;IACV,IAAGwH,SAAS,KAAK,IAAI,EAAC;MAClBG,IAAI,CAACpH,OAAO,GAAG,IAAI,CAAA;AACnBwE,MAAAA,OAAO,CAAC6C,GAAG,CAAC,iCAAiC,CAAC,CAAA;AAClD,KAAA;GACH,EAAC,EAAE,CAAC,CAAA;EAGL,oBAAQV,KAAA,CAAAC,aAAA,CAAAD,KAAA,CAAAW,QAAA,EACHJ,IAAAA,EAAAA,UAAU,gBAAGP,KAAA,CAAAC,aAAA,CAACW,MAAM,EAAA,IAAC,CAAC,GAAG,IAAI,EAC7BN,SAAS,gBACNN,KAAA,CAAAC,aAAA,CAACY,UAAU,EAAA;AAACtC,IAAAA,GAAG,EAAE+B,SAAU;AAACvB,IAAAA,OAAO,EAAE;AAAC,MAAA,GAAGA,OAAO;MAAE0B,IAAI,EAAEA,IAAI,CAACpH,OAAAA;AAAO,KAAA;GAAG,CAAC,GAAG,IAC7E,CAAC,CAAA;AACX,CAAC,CAAA;AAGD,MAAMwH,UAAU,GAAGA,CAAC;EAACtC,GAAG;AAAEQ,EAAAA,OAAAA;AAAO,CAAC,KAAK;AACnC,EAAA,MAAM+B,QAAQ,GAAGhC,YAAM,CAAC,IAAI,CAAC,CAAA;AAC7BhG,EAAAA,eAAS,CAAC,MAAI;AACVgI,IAAAA,QAAQ,CAACzH,OAAO,CAACG,GAAG,GAAG,IAAI,CAAA;AAC3BsH,IAAAA,QAAQ,CAACzH,OAAO,CAACG,GAAG,GAAG+E,GAAG,CAAA;AAE9B,GAAC,EAAE,CAACA,GAAG,CAAC,CAAC,CAAA;EAET,IAAGQ,OAAO,CAACC,EAAE,KAAK,KAAK,EACnB,oBAAOgB,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACHE,IAAAA,GAAG,EAAEW,QAAS;AACdnC,IAAAA,SAAS,EACH,CAACI,OAAO,CAAC0B,IAAI,GAAG,SAAS,GAAG,EAAE,KAC7B1B,OAAO,CAACP,SAAS,GAAG,YAAY,GAAG,EAAE,CAAA;AAAE,GAC7C,CAAC,CAAA,KACL,oBAAOwB,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACJtB,IAAAA,SAAS,EACH,CAACI,OAAO,CAAC0B,IAAI,GAAG,SAAS,GAAG,EAAE,KAC7B1B,OAAO,CAACP,SAAS,GAAG,YAAY,GAAG,EAAE,CAAE;AAC9CE,IAAAA,KAAK,EAAI;AAACqC,MAAAA,eAAe,EAAC,OAAO,GAAGxC,GAAG,GAAG,IAAA;AAAI,KAAA;AAAE,GAC1C,CAAC,CAAA;AACnB,CAAC,CAAA;AAGD,MAAMqC,MAAM,GAAGA,MAAK;EACnB,oBACOZ,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACI,IAAA,aAAA,EAAY,qBAAqB;AACjCtB,IAAAA,SAAS,EAAC,eAAe;AACzBqC,IAAAA,KAAK,EAAC,4BAA4B;AAClCC,IAAAA,UAAU,EAAC,8BAA8B;AACzCC,IAAAA,OAAO,EAAC,aAAa;AACrBC,IAAAA,gBAAgB,EAAC,aAAA;GAEjBnB,eAAAA,KAAA,CAAAC,aAAA,CAAA,MAAA,EAAA;AAAMmB,IAAAA,IAAI,EAAC,MAAM;AAACC,IAAAA,CAAC,EAAC,gGAAA;AAAgG,GAAO,CAC1H,CAAC,CAAA;AAEd,CAAC;;;;","x_google_ignoreList":[0]}