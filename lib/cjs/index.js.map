{"version":3,"file":"index.js","sources":["../../node_modules/style-inject/dist/style-inject.es.js","../../src/useIntersectionObserver.jsx","../../src/Ymage.jsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { useState, useEffect } from 'react'\r\n\r\nconst useIntersectionObserver = (element, margin=0) => {\r\n    const [isVisible, setState] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const observer = new IntersectionObserver(\r\n            ([entry]) => {\r\n              if (entry.isIntersecting) {\r\n                setState(entry.isIntersecting);\r\n                observer.disconnect();\r\n              }\r\n            }, { rootMargin: margin }\r\n        );\r\n        element.current && observer.observe(element.current);\r\n        return () => observer.disconnect() \r\n    }, []);\r\n\r\n    return isVisible;\r\n};\r\nexport default useIntersectionObserver;\r\n","import React from 'react'\r\nimport './Ymage.scss';\r\n\r\nimport { useRef, useState } from 'react';\r\nimport useIntersectionObserver from \"./useIntersectionObserver.jsx\"\r\n\r\nexport default function Ymage({url, copyright, lazy=\"200px\", type=\"img\", onLoad, style, className=\"\", ...props}) {\r\n\tconst container = useRef();\r\n\tconst isVisible = (lazy === false) ? true : useIntersectionObserver(container, lazy);\r\n    const options = {as: type, copyright: copyright}; \r\n\r\n    function stylesFromProps(props) {\r\n        const styles = {};\r\n        if(props.w) styles.width = props.w;\r\n        if(props.h) styles.height = props.h;\r\n        if(props.r) styles.borderRadius = props.r;\r\n        if(props.wh) styles.aspectRatio = props.wh;\r\n        return styles;\r\n    }\r\n\r\n    function contextMenuHandler(){\r\n        if(options.copyright) {\r\n            container.current.classList.add(\"copyright\")\r\n            setTimeout(() => container.current.classList.remove(\"copyright\"), 1000);\r\n        }\r\n    }\r\n\r\n    return (\r\n\t\t<figure \r\n        {...props} \r\n        style={{...stylesFromProps(props), ...style}}\r\n        ref={container} \r\n        className={\"Ymage \" + className}\r\n        onContextMenu={contextMenuHandler}>\r\n\t\t\t{isVisible ? <FetchImageNative url={url} options={options} onLoad={onLoad}/> : null }\r\n\t\t</figure>\r\n\t)\r\n}\r\n\r\nconst FetchImageNative = ({url, options, onLoad}) => {\r\n    const [imageLoaded, setImageLoaded] = useState(false);\r\n    const img_tmp = new Image();\r\n    img_tmp.src = url;\r\n    img_tmp.onload = () => {\r\n        setTimeout(()=>{\r\n            if(onLoad) onLoad({x: img_tmp.width, y: img_tmp.height})\r\n            img_tmp.src = null; \r\n            setImageLoaded(true);\r\n        }, Math.random()*3000);\r\n    }\r\n\r\n    return imageLoaded ? \r\n        <PrintImage url={url} options={{...options, entry: \"fade-in\"}}/>\r\n        :\r\n        <Loader/>\r\n}\r\n\r\nconst PrintImage = ({url, options}) => {\r\n    if(options.as === \"img\")\r\n        return <img\r\n            src={url} \r\n            className = {(options.entry ? options.entry : \"\") + (options.copyright ? \" copyright\" : \"\")}\r\n            />\r\n    else return <div \r\n            className = {options.entry ? options.entry : \"\" + (options.copyright ? \" copyright\" : \"\")} \r\n            style = {{backgroundImage:\"url('\" + url + \"')\"}}\r\n            ></div>\r\n}\r\n\r\n\r\nconst Loader = () =>{\r\n\treturn( \r\n        <svg \r\n            className=\"ymage-spinner\" \r\n            xmlns=\"http://www.w3.org/2000/svg\" \r\n            xmlnsXlink=\"http://www.w3.org/1999/xlink\" \r\n            viewBox=\"0 0 100 100\" \r\n            enableBackground=\"new 0 0 0 0\" >\r\n\r\n            <path fill=\"#fff\" d=\"M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50\"></path>\r\n        </svg>\r\n    )\r\n}\r\n\r\n\r\n"],"names":["useIntersectionObserver","element","margin","isVisible","setState","useState","useEffect","observer","IntersectionObserver","entry","isIntersecting","disconnect","rootMargin","current","observe","Ymage","url","copyright","lazy","type","onLoad","style","className","props","container","useRef","options","as","stylesFromProps","styles","w","width","h","height","r","borderRadius","wh","aspectRatio","contextMenuHandler","classList","add","setTimeout","remove","React","createElement","_extends","ref","onContextMenu","FetchImageNative","imageLoaded","setImageLoaded","img_tmp","Image","src","onload","x","y","Math","random","PrintImage","Loader","backgroundImage","xmlns","xmlnsXlink","viewBox","enableBackground","fill","d"],"mappings":"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","x_google_ignoreList":[0]}