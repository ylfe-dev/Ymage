{"version":3,"file":"index.js","sources":["../../node_modules/style-inject/dist/style-inject.es.js","../../src/useIntersectionObserver.jsx","../../src/useImageFetcher.jsx","../../src/Ymage.jsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { useState, useEffect } from 'react'\r\n\r\nconst useIntersectionObserver = (element, margin=0) => {\r\n    const [isVisible, setState] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const observer = new IntersectionObserver(\r\n            ([entry]) => {\r\n              if (entry.isIntersecting) {\r\n                setState(entry.isIntersecting);\r\n                observer.disconnect();\r\n              }\r\n            }, { rootMargin: margin }\r\n        );\r\n        element.current && observer.observe(element.current);\r\n        return () => observer.disconnect() \r\n    }, []);\r\n\r\n    return isVisible;\r\n};\r\nexport default useIntersectionObserver;\r\n","import {useEffect, useState} from 'react'\r\n\r\n\r\nexport default function useImageFetcher(src, onSize, onLoad, onError) {\r\n    const [dataURL, setDataURL] = useState(getImageFromCache())\r\n\r\n   \r\n    function clearImageCache(){\r\n        localStorage.clear();\r\n    }\r\n\r\n    function getImageFromCache() {\r\n        const cache = localStorage.getItem(src);\r\n\r\n        if(cache && typeof onSize === \"function\"){ \r\n            const tmp_image = new Image();\r\n            tmp_image.onload = () => \r\n                onSize({x: tmp_image.naturalWidth ,y: tmp_image.naturalHeight});\r\n            tmp_image.onerror = handleError; \r\n            tmp_image.src = cache;\r\n        } else if(cache && typeof onLoad === \"function\")\r\n            onLoad();\r\n\r\n        return cache;\r\n    }\r\n\r\n    function setImageCache(durl) {\r\n        localStorage.setItem(src, durl);\r\n    }\r\n\r\n    function handleError() {\r\n        onError();\r\n    }\r\n\r\n    \r\n    useEffect(()=>{\r\n\r\n        window.addEventListener('beforeunload', clearImageCache);\r\n\r\n        if(dataURL === null) {\r\n            let imageSize = 0;\r\n            let imageType = null;\r\n                        \r\n            fetch(src)\r\n                .then((response) => {\r\n                    imageType = response.headers.get('Content-Type');\r\n                    imageSize  = response.headers.get('Content-Length');\r\n                    return response.body;\r\n                })\r\n            .then((body) => {\r\n                const reader = body.getReader();\r\n\r\n                let size_published = false;\r\n                let sos_markers = 0;\r\n                let sop_marker = false;\r\n                let analizing = (imageType === \"image/jpeg\");\r\n                let last_update_size = 0;\r\n                let chunks = new Array();\r\n                let durl;\r\n\r\n                return new ReadableStream({\r\n                    start(controller) {\r\n                        return pump();\r\n\r\n                        function pump() {\r\n                            return reader.read().then(({ done, value }) => {\r\n\r\n                                if (done) {\r\n                                    if(!durl)\r\n                                        publishDataURL();\r\n                                    setImageCache(durl);\r\n                                    onSizeHandler();\r\n                                    if(typeof onLoad === \"function\")\r\n                                    \tonLoad();\r\n                                    controller.close();\r\n                                    return;\r\n                                } else {\r\n                                    chunks.push(value);\r\n\r\n                                    if (analizing)\r\n                                        readJPGMarkers(value, \r\n                                            (sos) => {\r\n                                                if(!sop_marker && ++sos_markers > 1)\r\n                                                    jpegIsBaseline();\r\n                                                else if(sop_marker && ++sos_markers > 2)\r\n                                                    jpegFirstScan();\r\n                                            }, \r\n                                            (sop) => jpegIsProgrssive()\r\n                                        )\r\n                                    else if(sop_marker)\r\n                                        jpegUpdate();\r\n                                }\r\n\r\n                                controller.enqueue(value);\r\n                                return pump();\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n\r\n\r\n\r\n                function jpegIsProgrssive(){\r\n                    sop_marker = true;\r\n                    return false; \r\n                }\r\n\r\n                function jpegIsBaseline(){\r\n                    analizing = false;\r\n                    return true;\r\n                }\r\n\r\n                function jpegFirstScan(){\r\n                    if(analizing){\r\n                        jpegUpdate(true);\r\n                        analizing = false;\r\n                    }\r\n                }\r\n\r\n                function jpegUpdate(first_scan = false){\r\n                    const current_size = chunksSize(chunks)\r\n                    if( first_scan \r\n                        || (current_size - last_update_size) >= (imageSize / 3) \r\n                        || current_size == imageSize )\r\n                    {\r\n                        last_update_size = current_size;\r\n                        publishDataURL();\r\n                        if(first_scan && onSize)\r\n                            onSizeHandler();\r\n                    }\r\n                }\r\n\r\n                function publishDataURL(){\r\n                    const blob = new Blob(chunks, { type: imageType });\r\n                    if(durl)\r\n                        URL.revokeObjectURL(durl);\r\n                    durl = URL.createObjectURL(blob);\r\n                    setDataURL(durl)\r\n                }\r\n\r\n                function onSizeHandler() {\r\n                    if(!size_published && typeof onSize === \"function\"){\r\n                        size_published = true;\r\n                        const tmp_image = new Image();\r\n                        tmp_image.onload = () => \r\n                            onSize({x: tmp_image.naturalWidth ,y: tmp_image.naturalHeight});\r\n                        tmp_image.onerror = handleError;\r\n                        tmp_image.src = durl;\r\n                    }\r\n                }\r\n            })\r\n            .catch((err) => handleError());\r\n        }\r\n\r\n        return () => {\r\n            window.removeEventListener('beforeunload', clearImageCache);\r\n        }\r\n    }, [])\r\n\r\n\r\n    return dataURL;\r\n}\r\n\r\nconst readJPGMarkers = (chunk, onSOS, onSOP) => {\r\n    for(let i = 0; i < chunk.length; ++i){\r\n        if(chunk[i] === 0xFF){\r\n            switch(chunk[++i]){\r\n                case 0xDA: onSOS(i); break;\r\n                case 0xC2: onSOP(i); break;\r\n            }\r\n        } \r\n    }\r\n}   \r\n\r\n\r\n\r\nfunction chunksSize(chunks) {\r\n    let size = 0;\r\n    for(const chunk of chunks)\r\n        size += chunk.length;\r\n    return size;\r\n}\r\n","import React from 'react'\r\nimport './Ymage.scss';\r\n\r\nimport { useRef, useState, useEffect } from 'react';\r\nimport useIntersectionObserver from \"./useIntersectionObserver.jsx\"\r\nimport useImageFetcher from './useImageFetcher.jsx'\r\n\r\n\r\nexport default function Ymage({\r\n    url, \r\n    copyright, \r\n    lazy=\"200px\", \r\n    type=\"img\", \r\n    onLoad, \r\n    onSize,\r\n    onError,\r\n    style,\r\n    className=\"\",\r\n    color=\"#b7b7b7\", \r\n    bg=\"#d0d0d0\",\r\n    w, h, wh, r,\r\n    ...props\r\n}) {\r\n\r\n\tconst container = useRef();\r\n\tconst isVisible = (lazy === false) ? true : useIntersectionObserver(container, lazy);\r\n    const options = {as: type, copyright: copyright, color: color }; \r\n\r\n    function stylesFromProps(props) {\r\n        const styles = {};\r\n        if(w) styles.width = w;\r\n        if(h) styles.height = h;\r\n        if(r) styles.borderRadius = r;\r\n        if(wh) styles.aspectRatio = wh;\r\n        if(bg) styles.backgroundColor = bg;\r\n        return styles;\r\n    }\r\n\r\n    function contextMenuHandler(){\r\n        if(options.copyright) {\r\n            container.current.classList.add(\"copyright\");\r\n            setTimeout(() => container.current.classList.remove(\"copyright\"), 1000);\r\n        }\r\n    }\r\n\r\n    return (\r\n\t\t<figure \r\n        {...props} \r\n        style={{...stylesFromProps(), ...style}}\r\n        ref={container} \r\n        className={\"Ymage \" + className}\r\n        onContextMenu={contextMenuHandler}>\r\n\t\t\t{isVisible ? \r\n                <FetchImage \r\n                    url={url} \r\n                    options={options} \r\n                    onSize={onSize} \r\n                    onLoad={onLoad}\r\n                    onError={onError}\r\n                /> : null }\r\n\t\t</figure>\r\n\t)\r\n}\r\n\r\n\r\nconst FetchImage = ({url, options, onLoad, onSize, onError}) => {\r\n    const imageData = useImageFetcher(url, onSize, onLoad, handleError);\r\n    const [showLoader, setShowLoader] = useState(true);\r\n    const [showError, setShowError] = useState(false);\r\n    const fade = useRef(false);\r\n\r\n    function handleError(e) {\r\n        setShowError(true);\r\n        setShowLoader(false);\r\n        if(typeof onError === \"function\") onError()\r\n    }\r\n\r\n    useEffect(()=>{\r\n        if(showLoader && imageData)\r\n            setTimeout(() => setShowLoader(false), 1000)\r\n    },[imageData])\r\n\r\n    useEffect(()=>{\r\n        if(imageData === null)\r\n            fade.current = true;\r\n    },[])\r\n\r\n\r\n    return (<>\r\n        {showLoader ? <Loader color={options.color}/> : null}\r\n        {(imageData && !showError) ? \r\n            <PrintImage url={imageData} options={{...options, fade: fade.current}}/> : null}\r\n        {showError ? <ImageError color={options.color} /> : null}\r\n        </>)\r\n}\r\n\r\n\r\nconst PrintImage = ({url, options}) => {\r\n    const imageRef = useRef(null);\r\n    useEffect(()=>{\r\n        if(options.as === \"img\"){\r\n            imageRef.current.src = null;\r\n            imageRef.current.src = url;\r\n        } else \r\n            imageRef.current.style.backgroundImage=\"url('\"+url+\"')\";\r\n    }, [url])\r\n\r\n    if(options.as === \"img\")\r\n        return <img\r\n            ref={imageRef}\r\n            className = {\r\n                  (options.fade ? \"fade-in\" : \"\") \r\n                + (options.copyright ? \" copyright\" : \"\")}\r\n            />\r\n    else return <div \r\n            ref={imageRef}\r\n            className = {\r\n                  (options.fade ? \"fade-in\" : \"\") \r\n                + (options.copyright ? \" copyright\" : \"\")} \r\n            ></div>\r\n}\r\n\r\n\r\nconst Loader = ({color}) =>{\r\n\treturn( \r\n        <svg \r\n            data-testid=\"placeholder-spinner\"\r\n            className=\"ymage-spinner\" \r\n            xmlns=\"http://www.w3.org/2000/svg\" \r\n            xmlnsXlink=\"http://www.w3.org/1999/xlink\" \r\n            viewBox=\"0 0 100 100\" \r\n            enableBackground=\"new 0 0 0 0\" >\r\n\r\n            <path fill={color} d=\"M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50\"></path>\r\n        </svg>\r\n    )\r\n}\r\n\r\nconst ImageError = ({color}) => {\r\n    return (\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\">\r\n        <path fill={color} d=\"M 16 7 C 13.36052 7 11.067005 8.2378107 9.421875 10.052734 C 9.2797018 10.03501 9.1552693 10 9 10 C 6.8026661 10 5 11.802666 5 14 C 5 14.0074 5.0018931 14.008395 5.0019531 14.015625 C 3.2697139 15.069795 2 16.832921 2 19 C 2 22.301625 4.6983746 25 8 25 L 24 25 C 27.301625 25 30 22.301625 30 19 C 30 15.842259 27.509898 13.303165 24.40625 13.082031 C 23.18074 9.5665933 19.923127 7 16 7 z M 16 9 C 19.27847 9 22.005734 11.243586 22.775391 14.271484 L 22.978516 15.072266 L 23.800781 15.023438 C 24.012411 15.011276 24.071091 15 24 15 C 26.220375 15 28 16.779625 28 19 C 28 21.220375 26.220375 23 24 23 L 8 23 C 5.7796254 23 4 21.220375 4 19 C 4 17.338324 5.0052754 15.930166 6.4335938 15.320312 L 7.1289062 15.023438 L 7.03125 14.271484 C 7.0103607 14.109285 7 14.025078 7 14 C 7 12.883334 7.8833339 12 9 12 C 9.14 12 9.2894098 12.02145 9.4628906 12.0625 L 10.087891 12.208984 L 10.482422 11.703125 C 11.765559 10.05801 13.75001 9 16 9 z M 15.984375 10.986328 A 1.0001 1.0001 0 0 0 15 12 L 15 16 A 1.0001 1.0001 0 1 0 17 16 L 17 12 A 1.0001 1.0001 0 0 0 15.984375 10.986328 z M 16 19 A 1 1 0 0 0 15 20 A 1 1 0 0 0 16 21 A 1 1 0 0 0 17 20 A 1 1 0 0 0 16 19 z\" fontWeight=\"400\" fontFamily=\"sans-serif\" white-space=\"normal\" overflow=\"visible\"/>\r\n        </svg>\r\n    )\r\n}\r\n\r\n\r\n\r\n"],"names":["useIntersectionObserver","element","margin","isVisible","setState","useState","useEffect","observer","IntersectionObserver","entry","isIntersecting","disconnect","rootMargin","current","observe","useImageFetcher","src","onSize","onLoad","onError","dataURL","setDataURL","getImageFromCache","clearImageCache","localStorage","clear","cache","getItem","tmp_image","Image","onload","x","naturalWidth","y","naturalHeight","onerror","handleError","setImageCache","durl","setItem","window","addEventListener","imageSize","imageType","fetch","then","response","headers","get","body","reader","getReader","size_published","sos_markers","sop_marker","analizing","last_update_size","chunks","Array","ReadableStream","start","controller","pump","read","done","value","publishDataURL","onSizeHandler","close","push","readJPGMarkers","sos","jpegIsBaseline","jpegFirstScan","sop","jpegIsProgrssive","jpegUpdate","enqueue","first_scan","current_size","chunksSize","blob","Blob","type","URL","revokeObjectURL","createObjectURL","catch","err","removeEventListener","chunk","onSOS","onSOP","i","length","size","Ymage","url","copyright","lazy","style","className","color","bg","w","h","wh","r","props","container","useRef","options","as","stylesFromProps","styles","width","height","borderRadius","aspectRatio","backgroundColor","contextMenuHandler","classList","add","setTimeout","remove","React","createElement","_extends","ref","onContextMenu","FetchImage","imageData","showLoader","setShowLoader","showError","setShowError","fade","e","Fragment","Loader","PrintImage","ImageError","imageRef","backgroundImage","xmlns","xmlnsXlink","viewBox","enableBackground","fill","d","fontWeight","fontFamily","overflow"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,SAAS,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE;AAC/B,EAAE,KAAK,GAAG,KAAK,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC;AACjC,EAAE,IAAI,QAAQ,GAAG,GAAG,CAAC,QAAQ,CAAC;AAC9B;AACA,EAAE,IAAI,CAAC,GAAG,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE,EAAE,OAAO,EAAE;AAC1D;AACA,EAAE,IAAI,IAAI,GAAG,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AACvE,EAAE,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;AAC9C,EAAE,KAAK,CAAC,IAAI,GAAG,UAAU,CAAC;AAC1B;AACA,EAAE,IAAI,QAAQ,KAAK,KAAK,EAAE;AAC1B,IAAI,IAAI,IAAI,CAAC,UAAU,EAAE;AACzB,MAAM,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;AAChD,KAAK,MAAM;AACX,MAAM,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AAC9B,KAAK;AACL,GAAG,MAAM;AACT,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AAC5B,GAAG;AACH;AACA,EAAE,IAAI,KAAK,CAAC,UAAU,EAAE;AACxB,IAAI,KAAK,CAAC,UAAU,CAAC,OAAO,GAAG,GAAG,CAAC;AACnC,GAAG,MAAM;AACT,IAAI,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC;AACpD,GAAG;AACH;;;;;ACvBA,MAAMA,uBAAuB,GAAGA,CAACC,OAAO,EAAEC,MAAM,GAAC,CAAC,KAAK;EACnD,MAAM,CAACC,SAAS,EAAEC,QAAQ,CAAC,GAAGC,cAAQ,CAAC,KAAK,CAAC,CAAA;AAE7CC,EAAAA,eAAS,CAAC,MAAM;IACZ,MAAMC,QAAQ,GAAG,IAAIC,oBAAoB,CACrC,CAAC,CAACC,KAAK,CAAC,KAAK;MACX,IAAIA,KAAK,CAACC,cAAc,EAAE;AACxBN,QAAAA,QAAQ,CAACK,KAAK,CAACC,cAAc,CAAC,CAAA;QAC9BH,QAAQ,CAACI,UAAU,EAAE,CAAA;AACvB,OAAA;AACF,KAAC,EAAE;AAAEC,MAAAA,UAAU,EAAEV,MAAAA;AAAO,KAC5B,CAAC,CAAA;IACDD,OAAO,CAACY,OAAO,IAAIN,QAAQ,CAACO,OAAO,CAACb,OAAO,CAACY,OAAO,CAAC,CAAA;AACpD,IAAA,OAAO,MAAMN,QAAQ,CAACI,UAAU,EAAE,CAAA;GACrC,EAAE,EAAE,CAAC,CAAA;AAEN,EAAA,OAAOR,SAAS,CAAA;AACpB,CAAC;;AChBc,SAASY,eAAeA,CAACC,GAAG,EAAEC,MAAM,EAAEC,MAAM,EAAEC,OAAO,EAAE;EAClE,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGhB,cAAQ,CAACiB,iBAAiB,EAAE,CAAC,CAAA;EAG3D,SAASC,eAAeA,GAAE;IACtBC,YAAY,CAACC,KAAK,EAAE,CAAA;AACxB,GAAA;EAEA,SAASH,iBAAiBA,GAAG;AACzB,IAAA,MAAMI,KAAK,GAAGF,YAAY,CAACG,OAAO,CAACX,GAAG,CAAC,CAAA;AAEvC,IAAA,IAAGU,KAAK,IAAI,OAAOT,MAAM,KAAK,UAAU,EAAC;AACrC,MAAA,MAAMW,SAAS,GAAG,IAAIC,KAAK,EAAE,CAAA;AAC7BD,MAAAA,SAAS,CAACE,MAAM,GAAG,MACfb,MAAM,CAAC;QAACc,CAAC,EAAEH,SAAS,CAACI,YAAY;QAAEC,CAAC,EAAEL,SAAS,CAACM,aAAAA;AAAa,OAAC,CAAC,CAAA;MACnEN,SAAS,CAACO,OAAO,GAAGC,WAAW,CAAA;MAC/BR,SAAS,CAACZ,GAAG,GAAGU,KAAK,CAAA;KACxB,MAAM,IAAGA,KAAK,IAAI,OAAOR,MAAM,KAAK,UAAU,EAC3CA,MAAM,EAAE,CAAA;AAEZ,IAAA,OAAOQ,KAAK,CAAA;AAChB,GAAA;EAEA,SAASW,aAAaA,CAACC,IAAI,EAAE;AACzBd,IAAAA,YAAY,CAACe,OAAO,CAACvB,GAAG,EAAEsB,IAAI,CAAC,CAAA;AACnC,GAAA;EAEA,SAASF,WAAWA,GAAG;AACnBjB,IAAAA,OAAO,EAAE,CAAA;AACb,GAAA;AAGAb,EAAAA,eAAS,CAAC,MAAI;AAEVkC,IAAAA,MAAM,CAACC,gBAAgB,CAAC,cAAc,EAAElB,eAAe,CAAC,CAAA;IAExD,IAAGH,OAAO,KAAK,IAAI,EAAE;MACjB,IAAIsB,SAAS,GAAG,CAAC,CAAA;MACjB,IAAIC,SAAS,GAAG,IAAI,CAAA;AAEpBC,MAAAA,KAAK,CAAC5B,GAAG,CAAC,CACL6B,IAAI,CAAEC,QAAQ,IAAK;QAChBH,SAAS,GAAGG,QAAQ,CAACC,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC,CAAA;QAChDN,SAAS,GAAII,QAAQ,CAACC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC,CAAA;QACnD,OAAOF,QAAQ,CAACG,IAAI,CAAA;AACxB,OAAC,CAAC,CACLJ,IAAI,CAAEI,IAAI,IAAK;AACZ,QAAA,MAAMC,MAAM,GAAGD,IAAI,CAACE,SAAS,EAAE,CAAA;QAE/B,IAAIC,cAAc,GAAG,KAAK,CAAA;QAC1B,IAAIC,WAAW,GAAG,CAAC,CAAA;QACnB,IAAIC,UAAU,GAAG,KAAK,CAAA;AACtB,QAAA,IAAIC,SAAS,GAAIZ,SAAS,KAAK,YAAa,CAAA;QAC5C,IAAIa,gBAAgB,GAAG,CAAC,CAAA;AACxB,QAAA,IAAIC,MAAM,GAAG,IAAIC,KAAK,EAAE,CAAA;AACxB,QAAA,IAAIpB,IAAI,CAAA;QAER,OAAO,IAAIqB,cAAc,CAAC;UACtBC,KAAKA,CAACC,UAAU,EAAE;YACd,OAAOC,IAAI,EAAE,CAAA;YAEb,SAASA,IAAIA,GAAG;cACZ,OAAOZ,MAAM,CAACa,IAAI,EAAE,CAAClB,IAAI,CAAC,CAAC;gBAAEmB,IAAI;AAAEC,gBAAAA,KAAAA;AAAM,eAAC,KAAK;AAE3C,gBAAA,IAAID,IAAI,EAAE;AACN,kBAAA,IAAG,CAAC1B,IAAI,EACJ4B,cAAc,EAAE,CAAA;kBACpB7B,aAAa,CAACC,IAAI,CAAC,CAAA;AACnB6B,kBAAAA,aAAa,EAAE,CAAA;AACf,kBAAA,IAAG,OAAOjD,MAAM,KAAK,UAAU,EAC9BA,MAAM,EAAE,CAAA;kBACT2C,UAAU,CAACO,KAAK,EAAE,CAAA;AAClB,kBAAA,OAAA;AACJ,iBAAC,MAAM;AACHX,kBAAAA,MAAM,CAACY,IAAI,CAACJ,KAAK,CAAC,CAAA;AAElB,kBAAA,IAAIV,SAAS,EACTe,cAAc,CAACL,KAAK,EACfM,GAAG,IAAK;oBACL,IAAG,CAACjB,UAAU,IAAI,EAAED,WAAW,GAAG,CAAC,EAC/BmB,cAAc,EAAE,CAAC,KAChB,IAAGlB,UAAU,IAAI,EAAED,WAAW,GAAG,CAAC,EACnCoB,aAAa,EAAE,CAAA;AACvB,mBAAC,EACAC,GAAG,IAAKC,gBAAgB,EAC7B,CAAC,CAAA,KACA,IAAGrB,UAAU,EACdsB,UAAU,EAAE,CAAA;AACpB,iBAAA;AAEAf,gBAAAA,UAAU,CAACgB,OAAO,CAACZ,KAAK,CAAC,CAAA;gBACzB,OAAOH,IAAI,EAAE,CAAA;AACjB,eAAC,CAAC,CAAA;AACN,aAAA;AACJ,WAAA;AACJ,SAAC,CAAC,CAAA;QAIF,SAASa,gBAAgBA,GAAE;AACvBrB,UAAAA,UAAU,GAAG,IAAI,CAAA;AACjB,UAAA,OAAO,KAAK,CAAA;AAChB,SAAA;QAEA,SAASkB,cAAcA,GAAE;AACrBjB,UAAAA,SAAS,GAAG,KAAK,CAAA;AACjB,UAAA,OAAO,IAAI,CAAA;AACf,SAAA;QAEA,SAASkB,aAAaA,GAAE;AACpB,UAAA,IAAGlB,SAAS,EAAC;YACTqB,UAAU,CAAC,IAAI,CAAC,CAAA;AAChBrB,YAAAA,SAAS,GAAG,KAAK,CAAA;AACrB,WAAA;AACJ,SAAA;AAEA,QAAA,SAASqB,UAAUA,CAACE,UAAU,GAAG,KAAK,EAAC;AACnC,UAAA,MAAMC,YAAY,GAAGC,UAAU,CAACvB,MAAM,CAAC,CAAA;AACvC,UAAA,IAAIqB,UAAU,IACNC,YAAY,GAAGvB,gBAAgB,IAAMd,SAAS,GAAG,CAAE,IACpDqC,YAAY,IAAIrC,SAAS,EAChC;AACIc,YAAAA,gBAAgB,GAAGuB,YAAY,CAAA;AAC/Bb,YAAAA,cAAc,EAAE,CAAA;AAChB,YAAA,IAAGY,UAAU,IAAI7D,MAAM,EACnBkD,aAAa,EAAE,CAAA;AACvB,WAAA;AACJ,SAAA;QAEA,SAASD,cAAcA,GAAE;AACrB,UAAA,MAAMe,IAAI,GAAG,IAAIC,IAAI,CAACzB,MAAM,EAAE;AAAE0B,YAAAA,IAAI,EAAExC,SAAAA;AAAU,WAAC,CAAC,CAAA;AAClD,UAAA,IAAGL,IAAI,EACH8C,GAAG,CAACC,eAAe,CAAC/C,IAAI,CAAC,CAAA;AAC7BA,UAAAA,IAAI,GAAG8C,GAAG,CAACE,eAAe,CAACL,IAAI,CAAC,CAAA;UAChC5D,UAAU,CAACiB,IAAI,CAAC,CAAA;AACpB,SAAA;QAEA,SAAS6B,aAAaA,GAAG;AACrB,UAAA,IAAG,CAACf,cAAc,IAAI,OAAOnC,MAAM,KAAK,UAAU,EAAC;AAC/CmC,YAAAA,cAAc,GAAG,IAAI,CAAA;AACrB,YAAA,MAAMxB,SAAS,GAAG,IAAIC,KAAK,EAAE,CAAA;AAC7BD,YAAAA,SAAS,CAACE,MAAM,GAAG,MACfb,MAAM,CAAC;cAACc,CAAC,EAAEH,SAAS,CAACI,YAAY;cAAEC,CAAC,EAAEL,SAAS,CAACM,aAAAA;AAAa,aAAC,CAAC,CAAA;YACnEN,SAAS,CAACO,OAAO,GAAGC,WAAW,CAAA;YAC/BR,SAAS,CAACZ,GAAG,GAAGsB,IAAI,CAAA;AACxB,WAAA;AACJ,SAAA;OACH,CAAC,CACDiD,KAAK,CAAEC,GAAG,IAAKpD,WAAW,EAAE,CAAC,CAAA;AAClC,KAAA;AAEA,IAAA,OAAO,MAAM;AACTI,MAAAA,MAAM,CAACiD,mBAAmB,CAAC,cAAc,EAAElE,eAAe,CAAC,CAAA;KAC9D,CAAA;GACJ,EAAE,EAAE,CAAC,CAAA;AAGN,EAAA,OAAOH,OAAO,CAAA;AAClB,CAAA;AAEA,MAAMkD,cAAc,GAAGA,CAACoB,KAAK,EAAEC,KAAK,EAAEC,KAAK,KAAK;AAC5C,EAAA,KAAI,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,KAAK,CAACI,MAAM,EAAE,EAAED,CAAC,EAAC;AACjC,IAAA,IAAGH,KAAK,CAACG,CAAC,CAAC,KAAK,IAAI,EAAC;AACjB,MAAA,QAAOH,KAAK,CAAC,EAAEG,CAAC,CAAC;AACb,QAAA,KAAK,IAAI;UAAEF,KAAK,CAACE,CAAC,CAAC,CAAA;AAAE,UAAA,MAAA;AACrB,QAAA,KAAK,IAAI;UAAED,KAAK,CAACC,CAAC,CAAC,CAAA;AAAE,UAAA,MAAA;AACzB,OAAA;AACJ,KAAA;AACJ,GAAA;AACJ,CAAC,CAAA;AAID,SAASb,UAAUA,CAACvB,MAAM,EAAE;EACxB,IAAIsC,IAAI,GAAG,CAAC,CAAA;EACZ,KAAI,MAAML,KAAK,IAAIjC,MAAM,EACrBsC,IAAI,IAAIL,KAAK,CAACI,MAAM,CAAA;AACxB,EAAA,OAAOC,IAAI,CAAA;AACf;;AC7Ke,SAASC,KAAKA,CAAC;EAC1BC,GAAG;EACHC,SAAS;AACTC,EAAAA,IAAI,GAAC,OAAO;AACZhB,EAAAA,IAAI,GAAC,KAAK;EACVjE,MAAM;EACND,MAAM;EACNE,OAAO;EACPiF,KAAK;AACLC,EAAAA,SAAS,GAAC,EAAE;AACZC,EAAAA,KAAK,GAAC,SAAS;AACfC,EAAAA,EAAE,GAAC,SAAS;EACZC,CAAC;EAAEC,CAAC;EAAEC,EAAE;EAAEC,CAAC;EACX,GAAGC,KAAAA;AACP,CAAC,EAAE;AAEF,EAAA,MAAMC,SAAS,GAAGC,YAAM,EAAE,CAAA;AAC1B,EAAA,MAAM3G,SAAS,GAAIgG,IAAI,KAAK,KAAK,GAAI,IAAI,GAAGnG,uBAAuB,CAAC6G,SAAS,EAAEV,IAAI,CAAC,CAAA;AACjF,EAAA,MAAMY,OAAO,GAAG;AAACC,IAAAA,EAAE,EAAE7B,IAAI;AAAEe,IAAAA,SAAS,EAAEA,SAAS;AAAEI,IAAAA,KAAK,EAAEA,KAAAA;GAAO,CAAA;EAE/D,SAASW,eAAeA,CAACL,KAAK,EAAE;IAC5B,MAAMM,MAAM,GAAG,EAAE,CAAA;AACjB,IAAA,IAAGV,CAAC,EAAEU,MAAM,CAACC,KAAK,GAAGX,CAAC,CAAA;AACtB,IAAA,IAAGC,CAAC,EAAES,MAAM,CAACE,MAAM,GAAGX,CAAC,CAAA;AACvB,IAAA,IAAGE,CAAC,EAAEO,MAAM,CAACG,YAAY,GAAGV,CAAC,CAAA;AAC7B,IAAA,IAAGD,EAAE,EAAEQ,MAAM,CAACI,WAAW,GAAGZ,EAAE,CAAA;AAC9B,IAAA,IAAGH,EAAE,EAAEW,MAAM,CAACK,eAAe,GAAGhB,EAAE,CAAA;AAClC,IAAA,OAAOW,MAAM,CAAA;AACjB,GAAA;EAEA,SAASM,kBAAkBA,GAAE;IACzB,IAAGT,OAAO,CAACb,SAAS,EAAE;MAClBW,SAAS,CAAChG,OAAO,CAAC4G,SAAS,CAACC,GAAG,CAAC,WAAW,CAAC,CAAA;AAC5CC,MAAAA,UAAU,CAAC,MAAMd,SAAS,CAAChG,OAAO,CAAC4G,SAAS,CAACG,MAAM,CAAC,WAAW,CAAC,EAAE,IAAI,CAAC,CAAA;AAC3E,KAAA;AACJ,GAAA;AAEA,EAAA,oBACFC,KAAA,CAAAC,aAAA,CAAAC,QAAAA,EAAAA,QAAA,KACUnB,KAAK,EAAA;AACTR,IAAAA,KAAK,EAAE;MAAC,GAAGa,eAAe,EAAE;MAAE,GAAGb,KAAAA;KAAO;AACxC4B,IAAAA,GAAG,EAAEnB,SAAU;IACfR,SAAS,EAAE,QAAQ,GAAGA,SAAU;AAChC4B,IAAAA,aAAa,EAAET,kBAAAA;AAAmB,GAAA,CAAA,EACtCrH,SAAS,gBACG0H,KAAA,CAAAC,aAAA,CAACI,UAAU,EAAA;AACPjC,IAAAA,GAAG,EAAEA,GAAI;AACTc,IAAAA,OAAO,EAAEA,OAAQ;AACjB9F,IAAAA,MAAM,EAAEA,MAAO;AACfC,IAAAA,MAAM,EAAEA,MAAO;AACfC,IAAAA,OAAO,EAAEA,OAAAA;GACZ,CAAC,GAAG,IACX,CAAC,CAAA;AAEX,CAAA;AAGA,MAAM+G,UAAU,GAAGA,CAAC;EAACjC,GAAG;EAAEc,OAAO;EAAE7F,MAAM;EAAED,MAAM;AAAEE,EAAAA,OAAAA;AAAO,CAAC,KAAK;EAC5D,MAAMgH,SAAS,GAAGpH,eAAe,CAACkF,GAAG,EAAEhF,MAAM,EAAEC,MAAM,EAAEkB,WAAW,CAAC,CAAA;EACnE,MAAM,CAACgG,UAAU,EAAEC,aAAa,CAAC,GAAGhI,cAAQ,CAAC,IAAI,CAAC,CAAA;EAClD,MAAM,CAACiI,SAAS,EAAEC,YAAY,CAAC,GAAGlI,cAAQ,CAAC,KAAK,CAAC,CAAA;AACjD,EAAA,MAAMmI,IAAI,GAAG1B,YAAM,CAAC,KAAK,CAAC,CAAA;EAE1B,SAAS1E,WAAWA,CAACqG,CAAC,EAAE;IACpBF,YAAY,CAAC,IAAI,CAAC,CAAA;IAClBF,aAAa,CAAC,KAAK,CAAC,CAAA;AACpB,IAAA,IAAG,OAAOlH,OAAO,KAAK,UAAU,EAAEA,OAAO,EAAE,CAAA;AAC/C,GAAA;AAEAb,EAAAA,eAAS,CAAC,MAAI;AACV,IAAA,IAAG8H,UAAU,IAAID,SAAS,EACtBR,UAAU,CAAC,MAAMU,aAAa,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,CAAA;AACpD,GAAC,EAAC,CAACF,SAAS,CAAC,CAAC,CAAA;AAEd7H,EAAAA,eAAS,CAAC,MAAI;IACV,IAAG6H,SAAS,KAAK,IAAI,EACjBK,IAAI,CAAC3H,OAAO,GAAG,IAAI,CAAA;GAC1B,EAAC,EAAE,CAAC,CAAA;AAGL,EAAA,oBAAQgH,KAAA,CAAAC,aAAA,CAAAD,KAAA,CAAAa,QAAA,EACHN,IAAAA,EAAAA,UAAU,gBAAGP,KAAA,CAAAC,aAAA,CAACa,MAAM,EAAA;IAACrC,KAAK,EAAES,OAAO,CAACT,KAAAA;AAAM,GAAC,CAAC,GAAG,IAAI,EAClD6B,SAAS,IAAI,CAACG,SAAS,gBACrBT,KAAA,CAAAC,aAAA,CAACc,UAAU,EAAA;AAAC3C,IAAAA,GAAG,EAAEkC,SAAU;AAACpB,IAAAA,OAAO,EAAE;AAAC,MAAA,GAAGA,OAAO;MAAEyB,IAAI,EAAEA,IAAI,CAAC3H,OAAAA;AAAO,KAAA;GAAG,CAAC,GAAG,IAAI,EAClFyH,SAAS,gBAAGT,KAAA,CAAAC,aAAA,CAACe,UAAU,EAAA;IAACvC,KAAK,EAAES,OAAO,CAACT,KAAAA;GAAQ,CAAC,GAAG,IAClD,CAAC,CAAA;AACX,CAAC,CAAA;AAGD,MAAMsC,UAAU,GAAGA,CAAC;EAAC3C,GAAG;AAAEc,EAAAA,OAAAA;AAAO,CAAC,KAAK;AACnC,EAAA,MAAM+B,QAAQ,GAAGhC,YAAM,CAAC,IAAI,CAAC,CAAA;AAC7BxG,EAAAA,eAAS,CAAC,MAAI;AACV,IAAA,IAAGyG,OAAO,CAACC,EAAE,KAAK,KAAK,EAAC;AACpB8B,MAAAA,QAAQ,CAACjI,OAAO,CAACG,GAAG,GAAG,IAAI,CAAA;AAC3B8H,MAAAA,QAAQ,CAACjI,OAAO,CAACG,GAAG,GAAGiF,GAAG,CAAA;AAC9B,KAAC,MACG6C,QAAQ,CAACjI,OAAO,CAACuF,KAAK,CAAC2C,eAAe,GAAC,OAAO,GAAC9C,GAAG,GAAC,IAAI,CAAA;AAC/D,GAAC,EAAE,CAACA,GAAG,CAAC,CAAC,CAAA;EAET,IAAGc,OAAO,CAACC,EAAE,KAAK,KAAK,EACnB,oBAAOa,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACHE,IAAAA,GAAG,EAAEc,QAAS;AACdzC,IAAAA,SAAS,EACH,CAACU,OAAO,CAACyB,IAAI,GAAG,SAAS,GAAG,EAAE,KAC7BzB,OAAO,CAACb,SAAS,GAAG,YAAY,GAAG,EAAE,CAAA;AAAE,GAC7C,CAAC,CAAA,KACL,oBAAO2B,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACJE,IAAAA,GAAG,EAAEc,QAAS;AACdzC,IAAAA,SAAS,EACH,CAACU,OAAO,CAACyB,IAAI,GAAG,SAAS,GAAG,EAAE,KAC7BzB,OAAO,CAACb,SAAS,GAAG,YAAY,GAAG,EAAE,CAAA;AAAE,GACxC,CAAC,CAAA;AACnB,CAAC,CAAA;AAGD,MAAMyC,MAAM,GAAGA,CAAC;AAACrC,EAAAA,KAAAA;AAAK,CAAC,KAAI;EAC1B,oBACOuB,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACI,IAAA,aAAA,EAAY,qBAAqB;AACjCzB,IAAAA,SAAS,EAAC,eAAe;AACzB2C,IAAAA,KAAK,EAAC,4BAA4B;AAClCC,IAAAA,UAAU,EAAC,8BAA8B;AACzCC,IAAAA,OAAO,EAAC,aAAa;AACrBC,IAAAA,gBAAgB,EAAC,aAAA;GAEjBtB,eAAAA,KAAA,CAAAC,aAAA,CAAA,MAAA,EAAA;AAAMsB,IAAAA,IAAI,EAAE9C,KAAM;AAAC+C,IAAAA,CAAC,EAAC,gGAAA;AAAgG,GAAO,CAC3H,CAAC,CAAA;AAEd,CAAC,CAAA;AAED,MAAMR,UAAU,GAAGA,CAAC;AAACvC,EAAAA,KAAAA;AAAK,CAAC,KAAK;EAC5B,oBACIuB,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAKkB,IAAAA,KAAK,EAAC,4BAA4B;AAACE,IAAAA,OAAO,EAAC,WAAA;GAChDrB,eAAAA,KAAA,CAAAC,aAAA,CAAA,MAAA,EAAA;AAAMsB,IAAAA,IAAI,EAAE9C,KAAM;AAAC+C,IAAAA,CAAC,EAAC,uoCAAuoC;AAACC,IAAAA,UAAU,EAAC,KAAK;AAACC,IAAAA,UAAU,EAAC,YAAY;AAAC,IAAA,aAAA,EAAY,QAAQ;AAACC,IAAAA,QAAQ,EAAC,SAAA;AAAS,GAAC,CACzuC,CAAC,CAAA;AAEd,CAAC;;;;","x_google_ignoreList":[0]}